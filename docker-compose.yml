version: '3.9'

services:
  db:
    image: container-registry.oracle.com/database/enterprise:19.3.0.0
    container_name: oracle19c
    environment:
      - ORACLE_PWD=sys123
      - ORACLE_SID=ORCLCDB
      - ORACLE_PDB=ORCLPDB1
      - ORACLE_CHARACTERSET=AL32UTF8
    ports:
      - "1521:1521"
      - "5500:5500"
    volumes:
      - ./oradata:/opt/oracle/oradata
    restart: unless-stopped

  ords:
    image: container-registry.oracle.com/database/ords
    container_name: ords
    environment:
      - DB_HOSTNAME=oracle19c
      - DB_PORT=1521
      - DB_SERVICE=ORCLPDB1
      - ORACLE_PWD=sys123  # <-- This must match the SYS password in the db container
      - ORDS_PWD=Apex#123
      - APEX_PWD=Apex#123
      - SYS_USER=SYS
      - SYS_PWD=sys123
      - CONN_STRING=oracle19c:1521/ORCLPDB1
    volumes:
      - ./ords/config:/etc/ords/config
      - ./apex/apex/images:/ords/apex/images
    depends_on:
      - db
    ports:
      - "8080:8080"
    restart: unless-stopped
